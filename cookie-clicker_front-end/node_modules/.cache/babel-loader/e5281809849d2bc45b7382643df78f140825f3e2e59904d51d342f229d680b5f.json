{"ast":null,"code":"import $ from 'jquery';\nimport { randomFloat, randomInteger } from '../site.js';\nimport { cookies, cps, increaseCookieCount } from './cookieHandler.js';\nconst maxGCookieLife = 13000;\nlet Tmin = 300; /*in seconds how long it takes for a cookie to appear*/\nlet Tmax = 900;\nlet nextSpawnInterval;\nexport function convertGCookieTimeToMS() {\n  Tmin *= 1000;\n  Tmax *= 1000;\n}\n\n/**/\n\nexport function setNextSpawnTime() {\n  let nextSpawnTime = randomFloat(Tmin, Tmax);\n  /* nextSpawnTime is the actual delay*/\n  nextSpawnInterval = window.setTimeout(spawnCookie, nextSpawnTime);\n  console.log(`Golden cookie will spawn in ${nextSpawnTime / 1000} seconds`);\n}\nfunction spawnCookie() {\n  let cookie = document.createElement(\"img\");\n  cookie.src = \"/images/goldCookie.png\";\n  cookie.className = \"golden-cookie\";\n  cookie.style.top = randomFloat(10, 90) + \"%\";\n  cookie.style.left = randomFloat(10, 90) + \"%\";\n  /*when someone clicks on cookie*/\n  cookie.onclick = () => {\n    goldenCookieClicked(cookie);\n  };\n  document.getElementsByTagName(\"body\")[0].appendChild(cookie);\n  goldenCookieFadeIn(cookie);\n  setNextSpawnTime();\n}\n/*hw*/\nfunction goldenCookieClicked(cookie) {\n  cookie.remove;\n  let randomCookieAmount = Math.round(Math.min(cookies * 1.15, cps));\n  increaseCookieCount(randomCookieAmount);\n}\nfunction goldenCookieFadeIn(cookie) {\n  let increaseScaleAmount = randomFloat(0.0006, 0.001);\n  /**/\n  let increaseOpacityAmount = increaseScaleAmount * 1.2;\n  cookie.style.scale = 0;\n  cookie.style.opacity = 0;\n  let scale = 0;\n  let opacity = 0;\n  let interval = setInterval(function () {\n    if (scale >= 1) {\n      clearInterval(interval);\n      cookie.dataset.timeSpawned = Date.now() + randomInteger(1000, 2000);\n    }\n    if (opacity < 1) {\n      opacity = Math.min(1, opacity + increaseOpacityAmount);\n      cookie.style.opacity = opacity;\n    }\n\n    /*Math.min ensures it cannot exceed 1*/\n    scale = Math.min(1, scale + increaseScaleAmount);\n    cookie.style.scale = scale;\n  }, 10);\n}\nfunction goldenCookieFadeOut(cookie) {\n  let decreaseOpacityAmount = randomFloat(0.0006, 0.001);\n  /**/\n  let increaseOpacityAmount = decreaseOpacityAmount * 0.6;\n  cookie.style.scale = 0;\n  cookie.style.opacity = 0;\n  let scale = 1;\n  let opacity = 1;\n  let interval = setInterval(function () {\n    if (scale <= 0) {\n      clearInterval(interval);\n      cookie.remove();\n    }\n    if (opacity > 0) {\n      opacity = Math.max(0, opacity - decreaseOpacityAmount);\n      cookie.style.opacity = opacity;\n    }\n\n    /*Math.min ensures it cannot exceed 1*/\n    scale = Math.max(0, scale - decreaseOpacityAmount);\n    cookie.style.scale = scale;\n  }, 10);\n}\nexport function removeGoldenCookie() {\n  let goldenCookies = $(\".golden-cookie\");\n  goldenCookies = Array.from(goldenCookies);\n  goldenCookies = goldenCookies.filter(function (item) {\n    return Date.now() - item.dataset.timeSpawned > maxGCookieLife;\n  });\n  for (let goldenCookie of goldenCookies) {\n    if (goldenCookie.style.scale >= 1) {\n      goldenCookieFadeOut(goldenCookie);\n    }\n  }\n}","map":{"version":3,"names":["$","randomFloat","randomInteger","cookies","cps","increaseCookieCount","maxGCookieLife","Tmin","Tmax","nextSpawnInterval","convertGCookieTimeToMS","setNextSpawnTime","nextSpawnTime","window","setTimeout","spawnCookie","console","log","cookie","document","createElement","src","className","style","top","left","onclick","goldenCookieClicked","getElementsByTagName","appendChild","goldenCookieFadeIn","remove","randomCookieAmount","Math","round","min","increaseScaleAmount","increaseOpacityAmount","scale","opacity","interval","setInterval","clearInterval","dataset","timeSpawned","Date","now","goldenCookieFadeOut","decreaseOpacityAmount","max","removeGoldenCookie","goldenCookies","Array","from","filter","item","goldenCookie"],"sources":["C:/Users/lucas/Desktop/CookieClickerVue/cookie-clicker_front-end/public/js/index/goldenCookie.js"],"sourcesContent":["import $ from 'jquery';\r\nimport {randomFloat, randomInteger} from '../site.js';\r\nimport { cookies, cps, increaseCookieCount} from './cookieHandler.js';\r\n\r\nconst maxGCookieLife = 13000;\r\nlet Tmin = 300;/*in seconds how long it takes for a cookie to appear*/\r\nlet Tmax = 900;\r\nlet nextSpawnInterval;\r\n\r\nexport function convertGCookieTimeToMS()\r\n{\r\n    Tmin *= 1000;\r\n    Tmax *= 1000;\r\n}\r\n\r\n/**/\r\n\r\nexport function setNextSpawnTime()\r\n{\r\n    let nextSpawnTime = randomFloat(Tmin, Tmax);\r\n    /* nextSpawnTime is the actual delay*/\r\n    nextSpawnInterval = window.setTimeout(spawnCookie, nextSpawnTime);\r\n    console.log(`Golden cookie will spawn in ${nextSpawnTime / 1000} seconds`);\r\n}\r\n\r\n\r\nfunction spawnCookie()\r\n{\r\n    let cookie = document.createElement(\"img\");\r\n    cookie.src = \"/images/goldCookie.png\";\r\n    cookie.className = \"golden-cookie\";\r\n    cookie.style.top = randomFloat(10, 90) + \"%\";\r\n    cookie.style.left = randomFloat(10, 90) + \"%\";\r\n    /*when someone clicks on cookie*/\r\n    cookie.onclick = () => { goldenCookieClicked(cookie); };\r\n    document.getElementsByTagName(\"body\")[0].appendChild(cookie);\r\n    goldenCookieFadeIn(cookie);\r\n    setNextSpawnTime();\r\n}\r\n/*hw*/\r\nfunction goldenCookieClicked(cookie)\r\n{\r\n\r\n    cookie.remove;\r\n    let randomCookieAmount = Math.round(Math.min(cookies * 1.15, cps));\r\n    increaseCookieCount(randomCookieAmount);\r\n}\r\n\r\nfunction goldenCookieFadeIn(cookie)\r\n{\r\n    let increaseScaleAmount = randomFloat(0.0006, 0.001);\r\n    /**/ \r\n    let increaseOpacityAmount = increaseScaleAmount * 1.2;\r\n    cookie.style.scale = 0;\r\n    cookie.style.opacity = 0;\r\n    let scale = 0;\r\n    let opacity = 0;\r\n    let interval = setInterval(function ()\r\n    {\r\n        if (scale >= 1)\r\n        {\r\n            clearInterval(interval);\r\n            cookie.dataset.timeSpawned = Date.now() + randomInteger(1000, 2000);\r\n        }\r\n\r\n        if (opacity < 1)\r\n        {\r\n            opacity = Math.min(1, opacity + increaseOpacityAmount);\r\n            cookie.style.opacity = opacity;\r\n        }\r\n\r\n        /*Math.min ensures it cannot exceed 1*/\r\n        scale = Math.min(1, scale + increaseScaleAmount);\r\n        cookie.style.scale = scale;\r\n\r\n    }, 10);\r\n}\r\n\r\nfunction goldenCookieFadeOut(cookie)\r\n{\r\n    let decreaseOpacityAmount = randomFloat(0.0006, 0.001);\r\n    /**/\r\n    let increaseOpacityAmount = decreaseOpacityAmount * 0.6;\r\n    cookie.style.scale = 0;\r\n    cookie.style.opacity = 0;\r\n    let scale = 1;\r\n    let opacity = 1;\r\n    let interval = setInterval(function () {\r\n        if (scale <= 0) {\r\n            clearInterval(interval);\r\n            cookie.remove();\r\n        }\r\n\r\n        if (opacity > 0) {\r\n            opacity = Math.max(0, opacity - decreaseOpacityAmount);\r\n            cookie.style.opacity = opacity;\r\n        }\r\n\r\n        /*Math.min ensures it cannot exceed 1*/\r\n        scale = Math.max(0, scale - decreaseOpacityAmount);\r\n        cookie.style.scale = scale;\r\n\r\n    }, 10);\r\n\r\n}\r\n\r\nexport function removeGoldenCookie()\r\n{\r\n    let goldenCookies = $(\".golden-cookie\");\r\n    goldenCookies = Array.from(goldenCookies);\r\n\r\n\r\n    goldenCookies = goldenCookies.filter(function (item)\r\n    {\r\n        return Date.now() - item.dataset.timeSpawned > maxGCookieLife;\r\n    });\r\n\r\n    for (let goldenCookie of goldenCookies)\r\n    {\r\n        if (goldenCookie.style.scale >= 1)\r\n        {\r\n            goldenCookieFadeOut(goldenCookie);\r\n        }\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}